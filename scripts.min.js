function rootUrl(n){return""+n}function webApiUrl(n){return"/"+n}function errorhandler(n,t){console.error(n,t)}function rootPartialsUrl(n){return document.location.href.indexOf("localhost")>=0?rootUrl("partials/")+n:rootUrl(n)}function rootDirectivesUrl(n){return document.location.href.indexOf("localhost")>=0?rootUrl("js/directives/")+n:rootUrl(n)}function rootJsUrl(n){return document.location.href.indexOf("localhost")>=0?rootUrl("js/")+n:rootUrl(n)}function AlleleFrequency(){return this.locusName="",this.populationCode="",this.populationName="",this.alleleNo=0,this.frequency=0,this}function Config(){return this.priorProbability=0,this.childLoci=[],this.fatherLoci=[],this.motherLoci=[],this.populationCode="",this.init=function(){return this.fatherLoci=this.fatherLoci.map(function(n){var t=new Locus;for(var i in n)t[i]=n[i];return t}),this.childLoci=this.childLoci.map(function(n){var t=new Locus;for(var i in n)t[i]=n[i];return t}),this},this}function ConfigMulti(){return this.priorProbabilities=[],this.childLoci=[],this.fatherLoci=[],this.motherLoci=[],this.populationCode="",this.getConfigs=function(){var n=this;return this.priorProbabilities.map(function(t){var i=new Config;return i.priorProbability=t,i.childLoci=n.childLoci,i.fatherLoci=n.fatherLoci,i.motherLoci=n.motherLoci,i.populationCode=n.populationCode,i})},this}function Locus(){return this.name="",this.allele1=0,this.allele2=0,this.isSame=function(){return this.allele1==this.allele2},this}function Report(){return this.combinedPaternityIndex=0,this.probabilityOfPaternity=0,this.priorProbability=0,this.verdict="",this}function Paternity(n){this.config=n||new Config;this.alleleFrequencies=[];this.paternityIndices=[];this.combinedPaternityIndex=1;var t=this;this.validate=function(){if(this.config==null)throw new Error(constants.ERROR_NULL,"config");else{if(this.config.childLoci==null)throw new Error(constants.ERROR_NULL,"childLoci");if(this.config.fatherLoci==null)throw new Error(constants.ERROR_NULL,"fatherLoci");if(this.config.childLoci.length==0)throw new Error(constants.CHILDLOCI_NOT_ZERO);if(this.config.fatherLoci.length!=this.config.childLoci.length)throw new Error(constants.FATHERLOCI_NO_EQUAL_CHILDLOCI_NO);}return!0};this.getCombinedPaternityIndex=function(){return this.paternityIndices=this.getPaternityIndices(),this.combinedPaternityIndex=this.paternityIndices.reduce(function(n,t){return n*t},1),this.combinedPaternityIndex};this.getProbabilityOfPaternity=function(){return this.getCombinedPaternityIndex(),this.combinedPaternityIndex*this.config.priorProbability/(this.combinedPaternityIndex*this.config.priorProbability+(1-this.config.priorProbability))*100};this.getPaternityIndices=function(){for(var f,r=[],n=0;n<t.config.fatherLoci.length;n++){var u=t.config.fatherLoci[n]||new Locus,s=t.config.childLoci[n]||new Locus,e=u.isSame()?1:.5,i=0,o=Locus.getSimilarAllele(u,s);o>0&&(f=t.alleleFrequencies.filter(function(n){return n.locusName==u.name&&n.alleleNo==o})[0],f!=null&&(i=f.frequency));console.log("X: "+e+"\tY: "+i);i==0?r.push(0):r.push(e/i*100)}return r};this.getVerdict=function(){t.config.init();var n=new Report;return n.probabilityOfPaternity=this.getProbabilityOfPaternity(),n.priorProbability=this.config.priorProbability,n.verdict=n.probabilityOfPaternity==0?constants.FATHER_EXCLUDED_VERDICT:n.probabilityOfPaternity>=90&&n.probabilityOfPaternity<100?constants.FATHER_NOT_EXCLUDED_VERDICT:constants.UNSURE_VERDICT,n}}function Report(){return this.combinedPaternityIndex=0,this.probabilityOfPaternity=0,this.priorProbability=0,this.verdict="",this}var babaOmoApp=angular.module("BabaOmoApp",["ui.router"]),alleles,testAlleleFrequencies,testConfig,constants,sampleFatherLoci,sampleChildLoci,doc;babaOmoApp.config(function(n,t,i){i.html5Mode(!0);t.otherwise("/info");n.state("home",{url:"/",templateUrl:rootPartialsUrl("splash.html")}).state("info",{url:"/info",templateUrl:rootPartialsUrl("info.html"),controller:"InfoCtrl"}).state("child",{url:"/child",templateUrl:rootPartialsUrl("child.html"),controller:"AllelesCtrl"}).state("father",{url:"/father",templateUrl:rootPartialsUrl("father.html"),controller:"AllelesCtrl"}).state("result",{url:"/result",templateUrl:rootPartialsUrl("result.html"),controller:"ResultCtrl"})});alleles=["D3S1358","D7S820","VWA","FGA","D8S1179","D21S11","D18S51","D5S818"];testAlleleFrequencies=[{locusName:"D3S1358",populationCode:"NIG",populationName:"Nigeria",alleleNo:11,frequency:1},{locusName:"D3S1358",populationCode:"NIG",populationName:"Nigeria",alleleNo:12,frequency:0},{locusName:"D3S1358",populationCode:"NIG",populationName:"Nigeria",alleleNo:13,frequency:0},{locusName:"D3S1358",populationCode:"NIG",populationName:"Nigeria",alleleNo:14,frequency:13.5},{locusName:"D3S1358",populationCode:"NIG",populationName:"Nigeria",alleleNo:15,frequency:31.3},{locusName:"D3S1358",populationCode:"NIG",populationName:"Nigeria",alleleNo:16,frequency:31.3},{locusName:"D3S1358",populationCode:"NIG",populationName:"Nigeria",alleleNo:17,frequency:17.7},{locusName:"D3S1358",populationCode:"NIG",populationName:"Nigeria",alleleNo:18,frequency:5.2},{locusName:"D3S1358",populationCode:"NIG",populationName:"Nigeria",alleleNo:19,frequency:0},{locusName:"VWA",populationCode:"NIG",populationName:"Nigeria",alleleNo:13,frequency:0},{locusName:"VWA",populationCode:"NIG",populationName:"Nigeria",alleleNo:14,frequency:8.7},{locusName:"VWA",populationCode:"NIG",populationName:"Nigeria",alleleNo:15,frequency:30.4},{locusName:"VWA",populationCode:"NIG",populationName:"Nigeria",alleleNo:16,frequency:23.9},{locusName:"VWA",populationCode:"NIG",populationName:"Nigeria",alleleNo:17,frequency:17.4},{locusName:"VWA",populationCode:"NIG",populationName:"Nigeria",alleleNo:18,frequency:8.7},{locusName:"VWA",populationCode:"NIG",populationName:"Nigeria",alleleNo:19,frequency:6.5},{locusName:"VWA",populationCode:"NIG",populationName:"Nigeria",alleleNo:20,frequency:1.1},{locusName:"VWA",populationCode:"NIG",populationName:"Nigeria",alleleNo:21,frequency:2.2},{locusName:"VWA",populationCode:"NIG",populationName:"Nigeria",alleleNo:22,frequency:1.1},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:16,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:17,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:18,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:18.2,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:19,frequency:7.6},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:20,frequency:3.3},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:20.2,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:21,frequency:10.9},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:21.2,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:22,frequency:18.5},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:22.2,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:23,frequency:18.5},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:23.2,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:24,frequency:17.4},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:24.2,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:25,frequency:12},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:25.2,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:26,frequency:3.3},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:26.2,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:27,frequency:2.2},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:27.2,frequency:1.1},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:28,frequency:5.4},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:29,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:31,frequency:0},{locusName:"FGA",populationCode:"NIG",populationName:"Nigeria",alleleNo:32.2,frequency:0},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:7,frequency:0},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:8,frequency:0},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:9,frequency:0},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:10,frequency:0},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:11,frequency:1.1},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:12,frequency:11.7},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:13,frequency:25.5},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:14,frequency:37.2},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:15,frequency:21.3},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:16,frequency:3.2},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:17,frequency:0},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:18,frequency:0},{locusName:"D8S1179",populationCode:"NIG",populationName:"Nigeria",alleleNo:19,frequency:0},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:23.2,frequency:0},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:24.2,frequency:0},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:25,frequency:1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:25.2,frequency:0},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:26,frequency:1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:27,frequency:4.2},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:28,frequency:28.1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:28.2,frequency:0},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:29,frequency:16.7},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:29.2,frequency:1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:30,frequency:15.6},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:30.2,frequency:2.1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:31,frequency:10.4},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:31.2,frequency:2.1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:32,frequency:3.1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:32.2,frequency:6.3},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:33,frequency:0},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:33.2,frequency:2.1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:34,frequency:1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:34.2,frequency:0},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:35,frequency:3.1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:36,frequency:2.1},{locusName:"D21S11",populationCode:"NIG",populationName:"Nigeria",alleleNo:37,frequency:0},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:9,frequency:0},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:10,frequency:0},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:10.2,frequency:0},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:11,frequency:1.1},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:11.2,frequency:0},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:12,frequency:9.6},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:13,frequency:2.1},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:13.2,frequency:1.1},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:14,frequency:5.3},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:14.2,frequency:0},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:15,frequency:19.1},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:15.2,frequency:1.1},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:16,frequency:9.6},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:17,frequency:22.3},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:18,frequency:10.6},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:19,frequency:8.5},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:20,frequency:6.4},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:21,frequency:2.1},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:22,frequency:0},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:23,frequency:1.1},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:24,frequency:0},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:25,frequency:0},{locusName:"D18S51",populationCode:"NIG",populationName:"Nigeria",alleleNo:27,frequency:0},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:6,frequency:0},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:7,frequency:1},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:8,frequency:4.2},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:9,frequency:2.1},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:10,frequency:15.6},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:11,frequency:21.9},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:12,frequency:33.3},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:13,frequency:19.8},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:14,frequency:2.1},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:15,frequency:0},{locusName:"D5S818",populationCode:"NIG",populationName:"Nigeria",alleleNo:16,frequency:0},{locusName:"D13S317",populationCode:"NIG",populationName:"Nigeria",alleleNo:6,frequency:0},{locusName:"D13S317",populationCode:"NIG",populationName:"Nigeria",alleleNo:7,frequency:0},{locusName:"D13S317",populationCode:"NIG",populationName:"Nigeria",alleleNo:8,frequency:2.1},{locusName:"D13S317",populationCode:"NIG",populationName:"Nigeria",alleleNo:9,frequency:0},{locusName:"D13S317",populationCode:"NIG",populationName:"Nigeria",alleleNo:10,frequency:2.1},{locusName:"D13S317",populationCode:"NIG",populationName:"Nigeria",alleleNo:11,frequency:24.5},{locusName:"D13S317",populationCode:"NIG",populationName:"Nigeria",alleleNo:12,frequency:51.1},{locusName:"D13S317",populationCode:"NIG",populationName:"Nigeria",alleleNo:13,frequency:12.8},{locusName:"D13S317",populationCode:"NIG",populationName:"Nigeria",alleleNo:14,frequency:6.4},{locusName:"D13S317",populationCode:"NIG",populationName:"Nigeria",alleleNo:15,frequency:1.1},{locusName:"D7S820",populationCode:"NIG",populationName:"Nigeria",alleleNo:6,frequency:1.1},{locusName:"D7S820",populationCode:"NIG",populationName:"Nigeria",alleleNo:7,frequency:1.1},{locusName:"D7S820",populationCode:"NIG",populationName:"Nigeria",alleleNo:8,frequency:23.4},{locusName:"D7S820",populationCode:"NIG",populationName:"Nigeria",alleleNo:9,frequency:10.6},{locusName:"D7S820",populationCode:"NIG",populationName:"Nigeria",alleleNo:10,frequency:34},{locusName:"D7S820",populationCode:"NIG",populationName:"Nigeria",alleleNo:11,frequency:21.3},{locusName:"D7S820",populationCode:"NIG",populationName:"Nigeria",alleleNo:12,frequency:6.4},{locusName:"D7S820",populationCode:"NIG",populationName:"Nigeria",alleleNo:13,frequency:2.1},{locusName:"D7S820",populationCode:"NIG",populationName:"Nigeria",alleleNo:14,frequency:0}];AlleleFrequency.getTestAlleleFrequencies=function(){return testAlleleFrequencies.map(function(n){var t=new AlleleFrequency;for(var i in n)t[i]=n[i];return t})};testConfig={fatherLoci:[{name:"D3S1358",allele1:15,allele2:16},{name:"D7S820",allele1:11,allele2:11},{name:"VWA",allele1:13,allele2:16},{name:"FGA",allele1:22,allele2:28},{name:"D8S1179",allele1:13,allele2:14},{name:"D21S11",allele1:28,allele2:32.2},{name:"D18S51",allele1:17,allele2:18},{name:"D5S818",allele1:8,allele2:12}],motherLoci:[{name:"D3S1358",allele1:17,allele2:18},{name:"D7S820",allele1:8,allele2:9},{name:"VWA",allele1:14,allele2:15},{name:"FGA",allele1:21,allele2:21},{name:"D8S1179",allele1:13,allele2:15},{name:"D21S11",allele1:28,allele2:29},{name:"D18S51",allele1:16,allele2:17},{name:"D5S818",allele1:11,allele2:14}],childLoci:[{name:"D3S1358",allele1:16,allele2:17},{name:"D7S820",allele1:8,allele2:11},{name:"VWA",allele1:14,allele2:16},{name:"FGA",allele1:21,allele2:28},{name:"D8S1179",allele1:14,allele2:15},{name:"D21S11",allele1:28,allele2:32.2},{name:"D18S51",allele1:17,allele2:18},{name:"D5S818",allele1:8,allele2:14}],populationCode:"NIG",priorProbability:.5};Config.getTestConfig=function(){var n=new Config;for(var t in testConfig)n[t]=testConfig[t];return n.init(),n};constants={ERROR_NULL:"Cannot be null",CHILDLOCI_NOT_ZERO:"Number of ChildLoci should be greater than zero (0)",FATHERLOCI_NO_EQUAL_CHILDLOCI_NO:"Number of Loci in Father should be same as Number of Loci in Child",FATHER_EXCLUDED_VERDICT:"The Father can be excluded as the Biological Father of the Child",FATHER_NOT_EXCLUDED_VERDICT:"The Father can NOT be excluded as the Biological Father of the Child",UNSURE_VERDICT:"Hmm, this is strange. This should not happen ... We are not sure what to say about the biological parentage of the child"};Locus.getSimilarAllele=function(n,t){return(n=n||new Locus,t=t||new Locus,n.allele1==t.allele1||n.allele1==t.allele2)?n.allele1:n.allele2==t.allele1||n.allele2==t.allele2?n.allele2:n.allele1==t.allele1||n.allele2==t.allele1?t.allele1:n.allele1==t.allele2||n.allele2==t.allele2?t.allele2:0};Paternity.testPaternity=function(){var n=new Paternity;return n.config=Config.getTestConfig(),n.alleleFrequencies=AlleleFrequency.getTestAlleleFrequencies(),n};babaOmoApp.factory("babaOmoFactory",function(n){var t={};return t.init=function(i){return i.getCountries=function(){return n.get(rootJsUrl("countries.json")).error(errorhandler)},i.getAlleles=function(){return n.get(rootJsUrl("alleles.json")).error(errorhandler)},i.String=String,i.Math=Math,i.Array=Array,i.Number=Number,t},t});babaOmoApp.controller("AllelesCtrl",function(n,t,i){var r,u;n.babaOmoFactory=i.init(n);r=function(i){this.name=i||"";this.alleles=[];var r=this;this.init=function(){for(var n=0;n<8;n++)this.addAllelePair();return this};this.generateChildAllelePairs=function(){if(!n.babaOmoFactory.fatherInfo){t.go("father");return}return n.babaOmoFactory.fatherInfo.alleles.slice(0).forEach(function(n){n.allele1=0;n.allele2=0;r.alleles.push(n)}),this};this.generateFatherAllelePairs=function(){if(!n.babaOmoFactory.info){t.go("info");return}return this.addAllelePair(),this};this.addAllelePair=function(){return(this.alleles.length==0||this.alleles.reduce(function(n,t){return n&&t.validate()},!0))&&this.alleles.push(new u),this};this.removeAllelePair=function(t){return t=Number(t)||0,this.alleles.length>t&&t>=0&&(n.selectedAlleleNames.splice(n.selectedAlleleNames.indexOf(this.alleles[t].name),1),this.alleles.splice(t,1)),this};this.validate=function(){return this.alleles.reduce(function(n,t){return n&&t.validate()},!0)}};n.AlleleInfo=r;n.AlleleInfo.create=function(n){return new r(n)};u=function(){this.name="Allele";this.allele1=0;this.allele2=0;this.validate=function(){var t,i;return doc.remError("[data-allele-pair-valid] input,select"),this.valid=!0,t=n.alleleInfo.alleles.map(function(n){return n.name}),t.distinct().length<t.length?(i=t.filter(function(n){return t.count(function(t){return t==n})>1}).distinct(),setTimeout(function(){i.forEach(function(n){doc.setError("select[data-allele-pair-name='"+n+"']","duplicate allele names")})},300),this.valid=!1):!String.isNullOrEmpty(this.name)&&this.name!="Allele"&&this.allele1>0&&this.allele2>0?this.valid=!0:(String.isNullOrEmpty(this.name)||this.name=="Allele"?doc.setError("[data-allele-pair-valid='false'] [ng-model='allelePair.name']","choose a valid allele name"):this.allele1?this.allele2||doc.setError("[data-allele-pair-valid='false'] [ng-model='allelePair.allele2']","choose a value for allele2"):doc.setError("[data-allele-pair-valid='false'] [ng-model='allelePair.allele1']","choose a value for allele1"),this.valid=!1),this.valid}};n.selectedAlleleNames=[];n.getAlleles().then(function(t){console.log("alleles",t.data);t.data.splice(0,0,"Allele");n.alleleNames=t.data;n.babaOmoFactory.alleleNames=t.data});n.proceedToChild=function(){n.alleleInfo.validate()&&(n.babaOmoFactory[n.alleleInfo.name+"Info"]=n.alleleInfo,t.go("child"))};n.proceedToResult=function(){n.alleleInfo.validate()&&(n.babaOmoFactory[n.alleleInfo.name+"Info"]=n.alleleInfo,t.go("result"))}});babaOmoApp.controller("InfoCtrl",function(n,t,i){n.babaOmoFactory=i.init(n);n.countries=[];n.getCountries().then(function(t){console.log("countries",t.data);n.countries=t.data;n.countries=n.countries.sort(function(n,t){return n.name>t.name});n.countries.splice(0,0,{name:"Choose a Country"})});var r=function(){this.name="Mykeels";this.email="";this.gender="male";this.dob="01/01/2002";this.country="NIG";var i=this;this.validate=function(){doc.remError("#inputName,#inputEmail,#inputCountry,#inputGender");String.isNullOrEmpty(i.name)?doc.setError("#inputName","Invalid Name"):String.isNullOrEmpty(i.country)?doc.setError("#inputCountry","Invalid Country"):String.isNullOrEmpty(i.gender)?doc.setError("#inputGender","Invalid Gender"):(i.submit(),n.babaOmoFactory.info=i)};this.submit=function(){n.babaOmoFactory.info=i;t.go("father")}};n.info=new r});sampleFatherLoci=[{name:"D3S1358",allele1:15,allele2:16},{name:"D7S820",allele1:11,allele2:11},{name:"VWA",allele1:13,allele2:16},{name:"FGA",allele1:22,allele2:28},{name:"D8S1179",allele1:13,allele2:14},{name:"D21S11",allele1:28,allele2:32.2},{name:"D18S51",allele1:17,allele2:18},{name:"D5S818",allele1:8,allele2:12}];sampleChildLoci=[{name:"D3S1358",allele1:16,allele2:17},{name:"D7S820",allele1:8,allele2:11},{name:"VWA",allele1:14,allele2:16},{name:"FGA",allele1:21,allele2:28},{name:"D8S1179",allele1:14,allele2:15},{name:"D21S11",allele1:28,allele2:32.2},{name:"D18S51",allele1:17,allele2:18},{name:"D5S818",allele1:8,allele2:14}];babaOmoApp.controller("ResultCtrl",function(n,t,i,r){n.babaOmoFactory=r.init(n);var u=new ConfigMulti;u.priorProbabilities=[.1,.2,.3,.4,.5,.6,.7,.8,.9];u.childLoci=(n.babaOmoFactory.childInfo||{}).alleles||sampleChildLoci;u.fatherLoci=(n.babaOmoFactory.fatherInfo||{}).alleles||sampleFatherLoci;u.populationCode="NIG";n.getVerdicts=function(t){u=t||u;console.log("request",u);i.get(rootUrl("Data/"+u.populationCode+"-Data.json")).success(function(t){console.log("population-allele-frequencies",t);var i=t;if(Array.isArray(i))n.verdicts=[],u.getConfigs().map(function(t){var r=new Paternity;r.config=t;r.alleleFrequencies=i;n.verdicts.push(r.getVerdict())});else throw new Error("response should be Array","population-allele-frequencies");}).error(errorhandler)}});Array.prototype.without=function(n){var t=this;return t.filter(function(t){return n.indexOf(t)<0})};babaOmoApp.directive("allelePair",function(){return{restrict:"AE",templateUrl:rootDirectivesUrl("allele-pair.dir.html"),scope:{allelePair:"=",alleleNames:"=",selectedAlleleNames:"=",index:"@",removeAllelePair:"&removeAllelePair",changeAlleleName:"@"},link:function(){},controller:function(n,t){n.babaOmoFactory=t.init(n);n.chooseAlleleName=function(){n.allelePair.validate()};n.getChangeAlleleName=function(){return n.changeAlleleName=String.isNullOrEmpty(n.changeAlleleName)?"false":n.changeAlleleName,n.changeAlleleName=n.changeAlleleName.toString().toLowerCase()=="false"?!1:!0,n.changeAlleleName}}}});$(".form-control").on("focus blur",function(n){$(this).parents(".form-group").toggleClass("focused",n.type==="focus"||this.value.length>0)}).trigger("blur");$(document).ready(function(){});String.isNullOrEmpty=function(n){return n==null||n==""};doc={setError:function(n,t){$(n).each(function(){$(this).css("border","1px solid red");$(this).notify(t,"error")})},remError:function(n){$(n).each(function(){$(this).css("border","");$(this).trigger("notify-hide")})}};Array.prototype.paginate=function(n){var t=this;return n=n||1,t.reduce(function(t,i){return t[t.length-1]&&t[t.length-1].length!=n||t.push([]),t[t.length-1].push(i),t},[])};Array.prototype.flatten=function(){var n=this;return n.reduce(function(n,t){return n.concat(t)},[])};Array.prototype.distinct=function(n){n=n||function(n){return n};var t=this;return t.reduce(function(t,i){return t.indexOf(n(i))<0?t.concat(i):t},[])};Array.prototype.find||(Array.prototype.find=function(n){var i,t;for(n=n||function(n){return n},i=this,t=0;t<i.length;t++)if(n(i[t]))return i[t];return null});Array.prototype.findIndex||(Array.prototype.findIndex=function(n){var i,t;for(n=n||function(n){return n},i=this,t=0;t<i.length;t++)if(n(i[t]))return t;return-1});Array.prototype.count=function(n){var t=this;return n=n||function(n){return n},t.filter(n).length};